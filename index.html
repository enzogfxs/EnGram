<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>EnGram - Rede Social</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 0; margin: 0; }
    .container { max-width: 600px; margin: 40px auto; background: white; padding: 20px; border-radius: 10px; }
    input, button, textarea { width: 100%; padding: 10px; margin: 5px 0; }
    .post { background: #e6e6e6; padding: 10px; border-radius: 5px; margin: 10px 0; }
    .post img { max-width: 100%; }
    .profile { display: flex; align-items: center; margin-top: 20px; }
    .profile img { width: 50px; height: 50px; border-radius: 50%; margin-right: 10px; }
    .profile-info { flex-grow: 1; }
    .followers { color: #555; font-size: 14px; }
  </style>
</head>
<body>
  <div class="container" id="auth-container">
    <h2>EnGram - Login</h2>
    <input type="text" id="username" placeholder="Nome de Usuário">
    <input type="password" id="password" placeholder="Senha">
    <button onclick="login()">Entrar</button>
    <button onclick="signup()">Criar Conta</button>
  </div>

  <div class="container" id="feed-container" style="display:none;">
    <h2>Feed</h2>
    <div id="posts"></div>
    <textarea id="newPost" placeholder="Escreva algo..."></textarea>
    <button onclick="createPost()">Publicar</button>
    <div id="followings"></div>
    <button onclick="logout()">Sair</button>
  </div>

  <div class="container" id="profile-container" style="display:none;">
    <h2>Perfil</h2>
    <div class="profile">
      <img id="profile-img" src="https://via.placeholder.com/50" alt="Avatar">
      <div class="profile-info">
        <h3 id="profile-username"></h3>
        <div id="profile-followers" class="followers"></div>
      </div>
    </div>
    <h4>Posts:</h4>
    <div id="profile-posts"></div>
    <button onclick="goToFeed()">Voltar ao Feed</button>
  </div>

  <script>
    // Função de cadastro
    function signup() {
      const username = document.getElementById("username").value;
      const password = document.getElementById("password").value;
      
      if (username && password) {
        localStorage.setItem('username', username);
        localStorage.setItem('password', password);
        localStorage.setItem('profile', JSON.stringify({ username: username, posts: [], followers: [] }));
        alert("Conta criada com sucesso! Agora é só fazer login.");
      } else {
        alert("Preencha todos os campos.");
      }
    }

    // Função de login
    function login() {
      const username = document.getElementById("username").value;
      const password = document.getElementById("password").value;
      const storedUsername = localStorage.getItem('username');
      const storedPassword = localStorage.getItem('password');
      
      if (username === storedUsername && password === storedPassword) {
        document.getElementById("auth-container").style.display = "none";
        document.getElementById("feed-container").style.display = "block";
        loadPosts();
        loadFollowings();
      } else {
        alert("Usuário ou senha inválidos.");
      }
    }

    // Criar um post
    function createPost() {
      const postContent = document.getElementById("newPost").value;
      if (postContent) {
        const user = JSON.parse(localStorage.getItem('profile'));
        user.posts.push(postContent);
        localStorage.setItem('profile', JSON.stringify(user));
        loadPosts();
      }
    }

    // Carregar posts do feed
    function loadPosts() {
      const user = JSON.parse(localStorage.getItem('profile'));
      const postsContainer = document.getElementById("posts");
      postsContainer.innerHTML = '';
      user.posts.forEach((post, index) => {
        const postDiv = document.createElement("div");
        postDiv.className = "post";
        postDiv.innerHTML = `
          <p>${post}</p>
          <button onclick="likePost(${index})">Curtir</button>
        `;
        postsContainer.appendChild(postDiv);
      });
    }

    // Curtir um post
    function likePost(index) {
      alert(Post ${index + 1} curtido!);
    }

    // Função de logout
    function logout() {
      document.getElementById("feed-container").style.display = "none";
      document.getElementById("auth-container").style.display = "block";
    }

    // Seguir outro usuário
    function followUser(username) {
      const user = JSON.parse(localStorage.getItem('profile'));
      if (!user.followers.includes(username)) {
        user.followers.push(username);
        localStorage.setItem('profile', JSON.stringify(user));
        loadFollowings();
      }
    }

    // Carregar seguidores
    function loadFollowings() {
      const user = JSON.parse(localStorage.getItem('profile'));
      const followingsContainer = document.getElementById("followings");
      followingsContainer.innerHTML = '';
      if (user.followers.length > 0) {
        followingsContainer.innerHTML = <h3>Seguindo:</h3>;
        user.followers.forEach((follower) => {
          const followDiv = document.createElement("div");
          followDiv.className = "profile";
          followDiv.innerHTML = `
            <p>${follower} <button onclick="goToProfile('${follower}')">Ver Perfil</button></p>
          `;
          followingsContainer.appendChild(followDiv);
        });
      } else {
        followingsContainer.innerHTML = "<p>Você não está seguindo ninguém ainda.</p>";
      }
    }

    // Ir para o perfil de outro usuário
    function goToProfile(username) {
      const user = JSON.parse(localStorage.getItem('profile'));
      document.getElementById("feed-container").style.display = "none";
      document.getElementById("profile-container").style.display = "block";
      document.getElementById("profile-username").innerText = user.username;
      document.getElementById("profile-followers").innerText = ${user.followers.length} seguidores;
      loadProfilePosts();
    }

    // Carregar posts no perfil
    function loadProfilePosts() {
      const user = JSON.parse(localStorage.getItem('profile'));
      const postsContainer = document.getElementById("profile-posts");
      postsContainer.innerHTML = '';
      user.posts.forEach((post) => {
        const postDiv = document.createElement("div");
        postDiv.className = "post";
        postDiv.innerHTML = <p>${post}</p>;
        postsContainer.appendChild(postDiv);
      });
    }

    // Voltar ao Feed
    function goToFeed() {
      document.getElementById("profile-container").style.display = "none";
      document.getElementById("feed-container").style.display = "block";
    }
  </script>
</body>
</html>